import{i as Y,c,F as m,G as Q,t as V,u as h,s as z,a as S,b as P,j as i,I as J,J as K,l as _,K as X,o as N,w as Z,A as ee,v as te,L as re,M as ne,N as se,S as oe,O as ie,Q as $,V as ae,W as H,X as L,R as ce}from"./index-lEqb2WGH.js";import{H as de}from"./H4-CVbMHXFZ.js";var T,A;function le(){return A||(A=1,T=function r(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,s,o;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(s=n;s--!==0;)if(!r(e[s],t[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(o=Object.keys(e),n=o.length,n!==Object.keys(t).length)return!1;for(s=n;s--!==0;)if(!Object.prototype.hasOwnProperty.call(t,o[s]))return!1;for(s=n;s--!==0;){var a=o[s];if(!r(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}),T}var ue=le();const ge=Y(ue),D=typeof window<"u"?c.useLayoutEffect:c.useEffect;function he(r,e,t){const[n,s]=c.useState(()=>e(r)),o=c.useCallback(()=>{const a=e(r);ge(n,a)||(s(a),t&&t())},[n,r,t]);return D(o),[n,o]}function pe(r,e,t){const[n,s]=he(r,e,t);return D(function(){const a=r.getHandlerId();if(a!=null)return r.subscribeToStateChange(s,{handlerIds:[a]})},[r,s]),n}function B(r,e,t){return pe(e,r||(()=>({})),()=>t.reconnect())}function G(r,e){const t=[];return typeof r!="function"&&t.push(r),c.useMemo(()=>typeof r=="function"?r():r,t)}function fe(r){return c.useMemo(()=>r.hooks.dragSource(),[r])}function me(r){return c.useMemo(()=>r.hooks.dragPreview(),[r])}let O=!1,y=!1;class ve{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){m(!O,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return O=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{O=!1}}isDragging(){if(!this.sourceId)return!1;m(!y,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return y=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{y=!1}}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,t){return this.internalMonitor.isOverTarget(e,t)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}let j=!1;class De{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}canDrop(){if(!this.targetId)return!1;m(!j,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return j=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{j=!1}}isOver(e){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,e):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}function Se(r,e,t){const n=t.getRegistry(),s=n.addTarget(r,e);return[s,()=>n.removeTarget(s)]}function xe(r,e,t){const n=t.getRegistry(),s=n.addSource(r,e);return[s,()=>n.removeSource(s)]}function k(r,e,t,n){let s;if(s!==void 0)return!!s;if(r===e)return!0;if(typeof r!="object"||!r||typeof e!="object"||!e)return!1;const o=Object.keys(r),a=Object.keys(e);if(o.length!==a.length)return!1;const d=Object.prototype.hasOwnProperty.bind(e);for(let l=0;l<o.length;l++){const g=o[l];if(!d(g))return!1;const p=r[g],v=e[g];if(s=void 0,s===!1||s===void 0&&p!==v)return!1}return!0}function M(r){return r!==null&&typeof r=="object"&&Object.prototype.hasOwnProperty.call(r,"current")}function we(r){if(typeof r.type=="string")return;const e=r.type.displayName||r.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${e} into a <div>, or turn it into a drag source or a drop target itself.`)}function be(r){return(e=null,t=null)=>{if(!c.isValidElement(e)){const o=e;return r(o,t),o}const n=e;return we(n),Ce(n,t?o=>r(o,t):r)}}function W(r){const e={};return Object.keys(r).forEach(t=>{const n=r[t];if(t.endsWith("Ref"))e[t]=r[t];else{const s=be(n);e[t]=()=>s}}),e}function F(r,e){typeof r=="function"?r(e):r.current=e}function Ce(r,e){const t=r.ref;return m(typeof t!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),t?c.cloneElement(r,{ref:n=>{F(t,n),F(e,n)}}):c.cloneElement(r,{ref:e})}class Ie{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){const e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){const e=this.dragSource,t=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return t&&this.disconnectDragSource(),this.handlerId?e?(t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),t):(this.lastConnectedDragSource=e,t):t}reconnectDragPreview(e=!1){const t=this.dragPreview,n=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(n&&this.disconnectDragPreview(),!!this.handlerId){if(!t){this.lastConnectedDragPreview=t;return}n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=t,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,t,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!k(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!k(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=W({dragSource:(t,n)=>{this.clearDragSource(),this.dragSourceOptions=n||null,M(t)?this.dragSourceRef=t:this.dragSourceNode=t,this.reconnectDragSource()},dragPreview:(t,n)=>{this.clearDragPreview(),this.dragPreviewOptions=n||null,M(t)?this.dragPreviewRef=t:this.dragPreviewNode=t,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}class Te{get connectTarget(){return this.dropTarget}reconnect(){const e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();const t=this.dropTarget;if(this.handlerId){if(!t){this.lastConnectedDropTarget=t;return}e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=t,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,t,this.dropTargetOptions))}}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!k(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=W({dropTarget:(t,n)=>{this.clearDropTarget(),this.dropTargetOptions=n,M(t)?this.dropTargetRef=t:this.dropTargetNode=t,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}function x(){const{dragDropManager:r}=c.useContext(Q);return m(r!=null,"Expected drag drop context"),r}function Oe(r,e){const t=x(),n=c.useMemo(()=>new Ie(t.getBackend()),[t]);return D(()=>(n.dragSourceOptions=r||null,n.reconnect(),()=>n.disconnectDragSource()),[n,r]),D(()=>(n.dragPreviewOptions=e||null,n.reconnect(),()=>n.disconnectDragPreview()),[n,e]),n}function ye(){const r=x();return c.useMemo(()=>new ve(r),[r])}class je{beginDrag(){const e=this.spec,t=this.monitor;let n=null;return typeof e.item=="object"?n=e.item:typeof e.item=="function"?n=e.item(t):n={},n??null}canDrag(){const e=this.spec,t=this.monitor;return typeof e.canDrag=="boolean"?e.canDrag:typeof e.canDrag=="function"?e.canDrag(t):!0}isDragging(e,t){const n=this.spec,s=this.monitor,{isDragging:o}=n;return o?o(s):t===e.getSourceId()}endDrag(){const e=this.spec,t=this.monitor,n=this.connector,{end:s}=e;s&&s(t.getItem(),t),n.reconnect()}constructor(e,t,n){this.spec=e,this.monitor=t,this.connector=n}}function ke(r,e,t){const n=c.useMemo(()=>new je(r,e,t),[e,t]);return c.useEffect(()=>{n.spec=r},[r]),n}function Me(r){return c.useMemo(()=>{const e=r.type;return m(e!=null,"spec.type must be defined"),e},[r])}function Pe(r,e,t){const n=x(),s=ke(r,e,t),o=Me(r);D(function(){if(o!=null){const[d,l]=xe(o,s,n);return e.receiveHandlerId(d),t.receiveHandlerId(d),l}},[n,e,t,s,o])}function Re(r,e){const t=G(r);m(!t.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const n=ye(),s=Oe(t.options,t.previewOptions);return Pe(t,n,s),[B(t.collect,n,s),fe(s),me(s)]}function Ee(r){return c.useMemo(()=>r.hooks.dropTarget(),[r])}function Ne(r){const e=x(),t=c.useMemo(()=>new Te(e.getBackend()),[e]);return D(()=>(t.dropTargetOptions=r||null,t.reconnect(),()=>t.disconnectDropTarget()),[r]),t}function $e(){const r=x();return c.useMemo(()=>new De(r),[r])}function He(r){const{accept:e}=r;return c.useMemo(()=>(m(r.accept!=null,"accept must be defined"),Array.isArray(e)?e:[e]),[e])}class Le{canDrop(){const e=this.spec,t=this.monitor;return e.canDrop?e.canDrop(t.getItem(),t):!0}hover(){const e=this.spec,t=this.monitor;e.hover&&e.hover(t.getItem(),t)}drop(){const e=this.spec,t=this.monitor;if(e.drop)return e.drop(t.getItem(),t)}constructor(e,t){this.spec=e,this.monitor=t}}function Ae(r,e){const t=c.useMemo(()=>new Le(r,e),[e]);return c.useEffect(()=>{t.spec=r},[r]),t}function Fe(r,e,t){const n=x(),s=Ae(r,e),o=He(r);D(function(){const[d,l]=Se(o,s,n);return e.receiveHandlerId(d),t.receiveHandlerId(d),l},[n,e,s,t,o.map(a=>a.toString()).join("|")])}function qe(r,e){const t=G(r),n=$e(),s=Ne(t.options);return Fe(t,n,s),[B(t.collect,n,s),Ee(s)]}/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],Ve=V("LockOpen",Ue);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],_e=V("Lock",ze),Be=(r,e)=>{const t=h(s=>s.grid.deskSetup[r][e]),n=h(s=>t!=null&&t.studentId?z(s,t.studentId):null);return{deskState:t,student:n}},Ge=({row:r,col:e,disabled:t=!1})=>{const n=S(),s=P(),{student:o}=Be(r,e),[a,d]=c.useState(!1),{index:l,type:g}=h(f=>f.grid.hoverState),p=l===r&&g==="row"||l===e&&g==="col",v=()=>n(J({row:r,col:e}));return i.jsx("button",{onClick:v,disabled:t,onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),className:`h-16 flex justify-center items-center rounded-md transition-all relative text-default bg-card border-2 border-default shadow-md 
                ${p&&"!bg-background"}
                ${!t&&"hover:text-text hover:bg-error hover:border-error"}`,children:i.jsx("span",{className:"font-semibold break-words overflow-hidden leading-tight",children:t?(o==null?void 0:o.name)||"":s(a?"common.remove":"components.grid.desk")})})},We=({disabled:r,row:e,col:t})=>{const n=S(),{index:s,type:o}=h(l=>l.grid.hoverState),a=s===e&&o==="row"||s===t&&o==="col",d=()=>n(K({row:e,col:t}));return i.jsx("button",{onClick:d,disabled:r,className:`h-16 flex justify-center items-center rounded-md border-2 border-border transition-all relative bg-element text-text-muted-extra 
                ${!r&&"hover:bg-element-hover hover:text-default hover:border-default"}
                ${r&&!a&&"!bg-transparent"}
                ${a&&"!bg-background"}`,children:r?"":"+"})},Ye=({row:r,col:e})=>{const{index:t,type:n}=h(o=>o.grid.hoverState),s=t===r&&n==="row"||t===e&&n==="col";return i.jsx("div",{className:`h-16 rounded-md border-2 border-border transition-all relative ${s&&"bg-background"}`})},Qe=_("students/swapStudents",async({fromCoords:r,toCoords:e},{getState:t,dispatch:n})=>{const o=t().grid.deskSetup.map(l=>l.map(g=>({...g}))),a=o[r.row][r.col].studentId,d=o[e.row][e.col].studentId;o[r.row][r.col].studentId=d,o[e.row][e.col].studentId=a,n(X(o))}),Je=_("students/assignStudent",async({id:r,coords:e},{getState:t,dispatch:n})=>{const o=t().grid.deskSetup[e.row][e.col].studentId;o&&n(N({id:o,val:!1})),n(Z({...e,id:r})),n(N({id:r,val:!0}))}),Ke=({row:r,col:e})=>{const t=S(),n=h(u=>u.grid.deskSetup[r][e]),s=h(u=>u.grid.deskSetup[r][e].isLocked),o=h(u=>u.grid.dndState),{index:a,type:d}=h(u=>u.grid.hoverState),l=a===r&&d==="row"||a===e&&d==="col",[{isOver:g},p]=qe(()=>({accept:"STUDENT",drop:u=>v({...u}),collect:u=>({isOver:!!u.isOver()})})),v=({id:u,fromCoords:w,action:E})=>{if(E==="set")t(Je({id:u,coords:{row:r,col:e}}));else if(E==="swap")t(Qe({fromCoords:w,toCoords:{row:r,col:e}}));else throw new Error("Unkown action. Please check the FAQ for solutions.")},[{isDragging:f},C]=Re(()=>({type:"STUDENT",item:{id:null,fromCoords:{row:r,col:e},action:"swap"},collect:u=>({isDragging:!!u.isDragging()})})),I=u=>{n.studentId&&!s&&C(u),s||p(u)};return c.useEffect(()=>{f||t(ee(g))},[g]),c.useEffect(()=>{t(te(f))},[f]),i.jsxs("div",{ref:I,className:et({isActive:l,isOver:g,dndState:o,deskState:n,isDragging:f,isLocked:s}),children:[i.jsx(Xe,{id:n.studentId,dndState:o,isLocked:s}),i.jsx(Ze,{row:r,col:e})]})},Xe=({id:r,dndState:e,isLocked:t})=>{const n=h(o=>r?z(o,r):null),s=P();return i.jsx("span",{className:"font-semibold break-words overflow-hidden leading-tight select-none",children:(n==null?void 0:n.name)||i.jsx("span",{className:`font-semibold text-element-hover transition-colors ${e.isDragging&&!t&&"text-text-muted-extra"}`,children:s(e.isDragging&&!t?"screens.assign.dnd.dropHere":"common.na")})})},Ze=({row:r,col:e})=>{const t=S(),n=h(o=>o.grid.deskSetup[r][e].isLocked),s=o=>{o.stopPropagation(),t(re({row:r,col:e,isLocked:!n}))};return i.jsx("div",{className:`absolute bottom-0 right-0 pr-0.5 -my-0.5 text-text-muted-extra ${n?"!text-error bg-opacity-30":"hover:text-success"} transition-colors`,children:i.jsx("button",{onClick:s,className:"pt-3 pl-3",children:n?i.jsx(_e,{size:16,strokeWidth:3,color:"currentcolor"}):i.jsx(Ve,{size:16,strokeWidth:3,color:"currentcolor"})})})},et=({isActive:r,isOver:e,dndState:t,deskState:n,isDragging:s,isLocked:o})=>`relative h-16 flex justify-center items-center rounded-md transition-all text-default bg-element border-2 border-default shadow-md 
    ${r&&"!bg-background"}
    ${e&&!o&&"shadow-success border-success bg-element-hover"}
    ${t.isDragging&&!t.isOver&&!o&&"bg-element-hover shadow-md shadow-default"}
    ${n.studentId&&e&&"shadow-warning !border-warning"}
    ${n.studentId?"cursor-pointer":"cursor-default"}
    ${s&&"opacity-15"}
    ${o&&"!border-border"}`,tt=({row:r,col:e,disabled:t=!1})=>{const n=h(s=>s.grid.deskSetup[r][e]);return t?i.jsx(i.Fragment,{children:n.deskState===-1?i.jsx(Ye,{row:r,col:e}):i.jsx(Ke,{row:r,col:e})}):i.jsx(i.Fragment,{children:n.deskState===-1?i.jsx(We,{row:r,col:e}):i.jsx(Ge,{row:r,col:e,disabled:t})})},R=({text:r,children:e})=>{const[t,n]=c.useState(!1),[s,o]=c.useState(void 0),[a,d]=c.useState(!1);c.useEffect(()=>{d("ontouchstart"in window||navigator.maxTouchPoints>0)},[]);const l=()=>{if(!a){const p=window.setTimeout(()=>n(!0),500);o(p)}},g=()=>{a||(clearTimeout(s),n(!1))};return i.jsx(i.Fragment,{children:r?i.jsxs("div",{className:"relative inline-block",onMouseEnter:l,onMouseLeave:g,children:[e,t&&i.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 bg-element text-text-muted font-medium text-sm lg:w-24  p-2 rounded-lg z-50",children:r})]}):e})},q=({onClick:r,toolTipText:e=""})=>i.jsx(R,{text:e,children:i.jsx("button",{onClick:r,className:"w-10 aspect-square p-2 hover:bg-success transition-colors rounded-lg",children:i.jsx(ne,{})})}),rt=({onClick:r,toolTipText:e=""})=>i.jsx(R,{text:e,children:i.jsx("button",{onClick:r,className:"w-10 aspect-square p-2 hover:bg-error transition-colors rounded-lg",children:i.jsx(se,{})})}),nt=({onClick:r,toolTipText:e=""})=>i.jsx(R,{text:e,children:i.jsx("button",{onClick:r,className:"w-10 aspect-square p-2 hover:bg-hover active:bg-active transition-colors rounded-lg",children:i.jsx(oe,{color:"#419eaf"})})}),b=()=>i.jsx("button",{className:"w-10 aspect-square p-2 rounded-lg"}),st=({type:r,index:e})=>{const t=S(),n=P(),s=()=>{t(ie({type:r==="row"?"col":"row",index:e}))},o=()=>{t($({type:r==="row"?"col":"row",index:e}))},a=()=>{t($({type:r==="row"?"col":"row",index:e+1}))},d=()=>{t(ae({type:r==="row"?"col":"row",index:e}))};//! TODO fix word order for german
return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:`absolute flex ${r==="row"?"flex-col min-w-[calc(100%+16px)] -top-20":"flex-row items-center sm:right-full -left-12 z-50"}`,children:[i.jsx("div",{className:"flex justify-center ",children:i.jsx("div",{className:`bg-element hover:bg-element-hover ${r==="row"?"rounded-t-lg":"rounded-l-lg"} shadow-md`,children:i.jsx(b,{})})}),i.jsxs("div",{className:`flex ${r==="row"?"flex-row justify-between":"flex-col"} rounded-lg shadow-md`,children:[i.jsx(b,{}),i.jsx(b,{}),i.jsx(b,{})]})]}),i.jsxs("div",{className:`absolute flex ${r==="row"?"flex-col min-w-[calc(100%+16px)] -top-20":"flex-row items-center sm:right-full -left-12 z-50"} `,children:[i.jsx("div",{className:"flex justify-center ",children:i.jsx("div",{className:`bg-element hover:bg-element-hover ${r==="row"?"rounded-t-lg":"rounded-l-lg"}`,children:i.jsx(nt,{onClick:d,toolTipText:`${n("components.grid.toolTips.select")} ${n(`components.grid.${r}`)}`})})}),i.jsxs("div",{className:`flex ${r==="row"?"flex-row justify-between":"flex-col"} bg-element hover:bg-element-hover rounded-lg`,children:[i.jsx(q,{onClick:o,toolTipText:`${n("components.grid.toolTips.insert")} ${n(`components.grid.${r}`)}`}),i.jsx(rt,{onClick:s,toolTipText:`${n("components.grid.toolTips.remove")} ${n(`components.grid.${r}`)}`}),i.jsx(q,{onClick:a,toolTipText:`${n("components.grid.toolTips.insert")} ${n(`components.grid.${r}`)}`})]})]})]})},U=({children:r,colIndex:e=-1,rowIndex:t=-1,disabled:n=!1})=>{const{type:s,index:o}=h(w=>w.grid.activeHeader),a=s==="row"?o===t:s==="col"?o===e:!1,d=S(),[l,g]=c.useState(!1),p=e!==-1?"row":"col",v=e!==-1?e:t,f=()=>{d(H({type:e===-1?"row":"col",index:e===-1?t:e})),n||g(!0)},C=()=>{d(H({type:null,index:-1})),n||g(!1)},I=w=>{w.stopPropagation(),d(L({type:e===-1?"row":"col",index:e===-1?t:e}))},u=()=>{g(!1),d(L({type:null,index:-1}))};return c.useEffect(()=>(document.addEventListener("click",u),()=>{document.removeEventListener("click",u)}),[]),i.jsx("div",{onMouseEnter:f,onMouseLeave:C,onClick:I,className:"relative flex justify-center items-center bg-element hover:bg-element-hover text-text-muted font-semibold py-1 px-1.5 rounded-md cursor-pointer transition-colors",children:i.jsxs(i.Fragment,{children:[r,(l||a&&!n)&&i.jsx(st,{index:v,type:p})]})})},at=({disabled:r=!1})=>{var n,s;const e=h(o=>o.grid.deskSetup),t=((n=e[0])==null?void 0:n.map((o,a)=>String.fromCharCode(65+a)))||[];return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid gap-2",style:{gridTemplateColumns:`auto repeat(${((s=e[0])==null?void 0:s.length)||1}, minmax(0, 1fr))`},children:[i.jsx("div",{}),t.map((o,a)=>i.jsx(U,{colIndex:a,rowIndex:-1,disabled:r,children:o},`header-col-${a}`)),e.map((o,a)=>i.jsxs(ce.Fragment,{children:[i.jsx(U,{rowIndex:a,colIndex:-1,disabled:r,children:a+1}),o.map((d,l)=>i.jsx(tt,{row:a,col:l,disabled:r},`${a}-${l}`))]},`row-${a}`))]}),e.length===0&&i.jsx(de,{value:"Oops... It seems like you didn't add any desks :("})]})};export{at as C,_e as L,R as T,qe as a,Ve as b,Re as u};
